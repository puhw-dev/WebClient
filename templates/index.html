<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 

<html>

<head>
  <title>OMG</title>
  <link rel="stylesheet" type="text/css" href="style.css" title="default" />

  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script type="text/javascript">
    google.load("visualization", "1", {packages:["corechart"]});
    // google.setOnLoadCallback(drawChart);
    function drawChart(dataArray) {
      var data = google.visualization.arrayToDataTable(dataArray);

      var options = {
        title: 'Dummy sinus'
      };

      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }

    function getDataAndPlot() {
      $.get("http://localhost:5000/json_sin", function(data) {
        drawChart(data);
      }); 
    }

    $(document).ready(function() {
      getDataAndPlot(); 

      $("#refresh_plot").click(function() {
        getDataAndPlot();
      });
    });
  </script>

</head>

<body> 
  <div id="chart_div" style="width: 900px; height: 500px;"></div>

  <a href="#" id="refresh_plot">Refresh plot</a>
</body>
</html>
